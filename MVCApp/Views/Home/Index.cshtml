@model System.Collections.Generic.List<Models.Contact>
@{
    ViewBag.Title = "Home Page";
}

<main>
    <table>
        <thead>
            <tr>
                <th>نام</th>
                <th>نام خانوادگی</th>
                <th>شماره همراه</th>
            </tr>
        </thead>
        <tbody id="tbl_body">
            @*@{
                    foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.firstName</td>
                            <td>@item.lastName</td>
                            <td>@item.phoneNumber</td>
                        </tr>
                    }
                }*@
        </tbody>
    </table>
</main>

<script>

    let url = "/Home/GetContacts";
    let html = "";

    const getAllContacts = async () => {
        try {
            const res = await fetch(url);
            const data = await res.json();
            return data;
        } catch {
            document.querySelector("#tbl_body").innerHTML = "خطا در دریافت اطلاعات.";
        }
    }

    const showData = async () => {
        try {
            const contacts = await getAllContacts();
            for (let i = 0; i < contacts.length; i++) {
                html += '<tr>';
                html += '<td>' + contacts[i].firstName + '</td>';
                html += '<td>' + contacts[i].lastName + '</td>';
                html += '<td>' + contacts[i].phoneNumber + '</td>';
                html += '</tr>';
            }
            document.querySelector("#tbl_body").innerHTML = html;
        } catch {
            document.querySelector("#tbl_body").innerHTML = "خطا در نمایش اطلاعات.";
        }

    }

    showData();

</script>